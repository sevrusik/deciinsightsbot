# dice.py - Dice System
"""
–°–∏—Å—Ç–µ–º–∞ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã—Ö –∫—É–±–∏–∫–æ–≤ –¥–ª—è —Å—Ç–æ—Ä–∏—Ç–µ–ª–ª–∏–Ω–≥–∞
"""

import random
from typing import Dict, List, Tuple
from config import DICE_TYPES


class DiceSystem:
    """–°–∏—Å—Ç–µ–º–∞ –∫—É–±–∏–∫–æ–≤ —Å —Å–∏–º–≤–æ–ª–∞–º–∏, –∞—Ä—Ö–µ—Ç–∏–ø–∞–º–∏ –∏ —ç–º–æ—Ü–∏—è–º–∏"""

    def __init__(self):
        self.symbols = DICE_TYPES["symbols"]
        self.archetypes = DICE_TYPES["archetypes"]
        self.emotions = DICE_TYPES["emotions"]

    def roll_dice(self) -> Dict[str, str]:
        """
        –ë—Ä–æ—Å–∏—Ç—å –≤—Å–µ —Ç—Ä–∏ –∫—É–±–∏–∫–∞

        Returns:
            dict: {"symbol": "üåô", "archetype": "–ì–µ—Ä–æ–π", "emotion": "–†–∞–¥–æ—Å—Ç—å"}
        """
        return {
            "symbol": random.choice(self.symbols),
            "archetype": random.choice(self.archetypes),
            "emotion": random.choice(self.emotions)
        }

    def roll_multiple(self, count: int = 1) -> List[Dict[str, str]]:
        """
        –ë—Ä–æ—Å–∏—Ç—å –∫—É–±–∏–∫–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑

        Args:
            count: –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –±—Ä–æ—Å–∫–æ–≤

        Returns:
            list: —Å–ø–∏—Å–æ–∫ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –±—Ä–æ—Å–∫–æ–≤
        """
        return [self.roll_dice() for _ in range(count)]

    def format_result(self, result: Dict[str, str]) -> str:
        """
        –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç –±—Ä–æ—Å–∫–∞ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è

        Args:
            result: —Ä–µ–∑—É–ª—å—Ç–∞—Ç –±—Ä–æ—Å–∫–∞

        Returns:
            str: –æ—Ç—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å—Ç—Ä–æ–∫–∞
        """
        return (
            f"üé≤ **–†–µ–∑—É–ª—å—Ç–∞—Ç –±—Ä–æ—Å–∫–∞:**\n\n"
            f"{result['symbol']} **–°–∏–º–≤–æ–ª:** {result['symbol']}\n"
            f"üë§ **–ê—Ä—Ö–µ—Ç–∏–ø:** {result['archetype']}\n"
            f"üí≠ **–≠–º–æ—Ü–∏—è:** {result['emotion']}"
        )

    def get_dice_meaning(self, dice_type: str, value: str) -> str:
        """
        –ü–æ–ª—É—á–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ –∫—É–±–∏–∫–∞

        Args:
            dice_type: —Ç–∏–ø –∫—É–±–∏–∫–∞ (symbol/archetype/emotion)
            value: –∑–Ω–∞—á–µ–Ω–∏–µ

        Returns:
            str: –æ–ø–∏—Å–∞–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è
        """
        meanings = {
            "symbols": {
                "üåô": "–ò–Ω—Ç—É–∏—Ü–∏—è, —Ç–∞–π–Ω—ã, –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –º–∏—Ä",
                "‚òÄÔ∏è": "–Ø—Å–Ω–æ—Å—Ç—å, —ç–Ω–µ—Ä–≥–∏—è, –Ω–∞—á–∞–ª–æ",
                "‚≠ê": "–ú–µ—á—Ç—ã, –≤–¥–æ—Ö–Ω–æ–≤–µ–Ω–∏–µ, –≤—ã—Å—à–∞—è —Ü–µ–ª—å",
                "üåä": "–≠–º–æ—Ü–∏–∏, —Ç–µ—á–µ–Ω–∏–µ, –∞–¥–∞–ø—Ç–∞—Ü–∏—è",
                "üî•": "–°—Ç—Ä–∞—Å—Ç—å, —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏—è, –¥–µ–π—Å—Ç–≤–∏–µ",
                "üå±": "–†–æ—Å—Ç, –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª, –Ω–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏"
            },
            "archetypes": {
                "–ì–µ—Ä–æ–π": "–ü—Ä–µ–æ–¥–æ–ª–µ–Ω–∏–µ –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏–π, —Å–º–µ–ª–æ—Å—Ç—å, –±–æ—Ä—å–±–∞",
                "–ú—É–¥—Ä–µ—Ü": "–ü–æ–∑–Ω–∞–Ω–∏–µ, –∞–Ω–∞–ª–∏–∑, –≤–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –º—É–¥—Ä–æ—Å—Ç—å",
                "–ò—Å–∫–∞—Ç–µ–ª—å": "–ü–æ–∏—Å–∫ –∏—Å—Ç–∏–Ω—ã, –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏–µ, –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ",
                "–¢–≤–æ—Ä–µ—Ü": "–°–æ–∑–∏–¥–∞–Ω–∏–µ, —Å–∞–º–æ–≤—ã—Ä–∞–∂–µ–Ω–∏–µ, –∏–Ω–Ω–æ–≤–∞—Ü–∏–∏",
                "–ú–∞–≥": "–¢—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏—è, –≤–ª–∏—è–Ω–∏–µ, –º–∞–≥–∏—è –ø–µ—Ä–µ–º–µ–Ω",
                "–õ—é–±–æ–≤–Ω–∏–∫": "–°–≤—è–∑—å, —Å—Ç—Ä–∞—Å—Ç—å, –≤—ã–±–æ—Ä —Å–µ—Ä–¥—Ü–µ–º"
            },
            "emotions": {
                "–†–∞–¥–æ—Å—Ç—å": "–õ–µ–≥–∫–æ—Å—Ç—å, –æ–ø—Ç–∏–º–∏–∑–º, –æ—Ç–∫—Ä—ã—Ç–æ—Å—Ç—å",
                "–°—Ç—Ä–∞—Ö": "–û—Å—Ç–æ—Ä–æ–∂–Ω–æ—Å—Ç—å, –∑–∞—â–∏—Ç–∞, –≥—Ä–∞–Ω–∏—Ü—ã",
                "–ì–Ω–µ–≤": "–≠–Ω–µ—Ä–≥–∏—è –ø–µ—Ä–µ–º–µ–Ω, –æ—Ç—Å—Ç–∞–∏–≤–∞–Ω–∏–µ —Å–µ–±—è",
                "–ü–µ—á–∞–ª—å": "–û—Ç–ø—É—Å–∫–∞–Ω–∏–µ, –ø—Ä–∏–Ω—è—Ç–∏–µ, –≥–ª—É–±–∏–Ω–∞",
                "–°–ø–æ–∫–æ–π—Å—Ç–≤–∏–µ": "–ë–∞–ª–∞–Ω—Å, —Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ—Å—Ç—å, –º–∏—Ä",
                "–í–¥–æ—Ö–Ω–æ–≤–µ–Ω–∏–µ": "–¢–≤–æ—Ä—á–µ—Å—Ç–≤–æ, –º–æ—Ç–∏–≤–∞—Ü–∏—è, –Ω–æ–≤—ã–µ –∏–¥–µ–∏"
            }
        }

        return meanings.get(dice_type, {}).get(value, "–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ")


# –ì–ª–æ–±–∞–ª—å–Ω—ã–π —ç–∫–∑–µ–º–ø–ª—è—Ä —Å–∏—Å—Ç–µ–º—ã –∫—É–±–∏–∫–æ–≤
dice_system = DiceSystem()
